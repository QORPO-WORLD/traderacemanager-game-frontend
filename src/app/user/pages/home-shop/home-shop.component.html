<div class="market-content" #top>
  <div class="market-back-div">
    <div class="market-back"></div>
  </div>

  <div class="content" *ngIf="marketState === 1">
    <div class="left-content">
      <p class="category-title-second">Limited</p>
      <p class="category-title-big">NFTs</p>
      <p class="races-desc bold">
        <span class="bold"> One time purchase , lifetime rewards.</span>
        <br />
        <br />
        Get a NFT car and an avatar of your favourite influencer in our limited
        bundles! Increase your daily income thanks to daily stakes today.
      </p>
    </div>
    <div class="right-content" #myScroll>
      <div class="filter">
        <p
          (click)="filterCars()"
          [ngClass]="{ active: title === 'Cars' }"
          class="category-title-fourth"
        >
          CARS
        </p>
        <div class="border-line"></div>
        <p
          (click)="filterRacers()"
          [ngClass]="{ active: title === 'Racers' }"
          class="category-title-fourth"
        >
          RACERS
        </p>

        <div class="border-line"></div>
        <p
          (click)="filterBundles()"
          [ngClass]="{ active: title === 'Bundles' }"
          class="category-title-fourth"
        >
          BUNDLES
          <span class="index">NEW</span>
        </p>
        <div class="border-line"></div>
        <p
          (click)="filterAll()"
          [ngClass]="{ active: title === 'All' }"
          class="category-title-fourth"
        >
          ALL
        </p>
      </div>
      <div class="boxes">
        <div
          (click)="showAsset(2, item['id']); scrollTop(top)"
          *ngFor="
            let item of newProducts | slice: sliceStart:sliceMiddle;
            let i = index
          "
          class="box"
        >
          <div class="box-content">
            <div class="box-image">
              <img
                [ngClass]="{ 'gif-hover': item['collection'] != 'Special' }"
                *ngIf="item['type'] === 'racer'"
                class="img racer"
                [src]="
                  '/assets/base/images/nft-racers/' + item['image'] + '.png'
                "
                [alt]="item['alt']"
              />
              <img
                [ngClass]="{ 'gif-hover': item['collection'] != 'Special' }"
                *ngIf="item['type'] === 'racer'"
                class="img gif-racer"
                [src]="'/assets/base/images/nft-racers/' + item['gif'] + '.gif'"
                [alt]="item['alt']"
              />
              <img
                [ngClass]="{ 'gif-hover': item['collection'] != 'Special' }"
                *ngIf="item['type'] === 'car' && item['gif']"
                class="img car"
                [src]="'/assets/base/images/nft-cars/' + item['image'] + '.png'"
                [alt]="item['alt']"
              />
              <img
                [ngClass]="{ 'gif-hover': item['collection'] != 'Special' }"
                *ngIf="item['type'] === 'car' && item['gif']"
                class="img gif-car"
                [src]="'/assets/base/images/nft-cars/' + item['gif'] + '.gif'"
                [alt]="item['alt']"
              />
              <img
                [ngClass]="{ 'gif-hover': item['collection'] != 'Special' }"
                *ngIf="item['type'] === 'car' && !item['gif']"
                class="img still car"
                [src]="'/assets/base/images/nft-cars/' + item['image'] + '.png'"
                [alt]="item['alt']"
              />

              <img
                *ngIf="item['type'] === 'track'"
                class="img still track"
                [src]="
                  '/assets/base/images/home-page/' +
                  item['image'] +
                  '-small.png'
                "
                [alt]="item['alt']"
              />
              <img
                *ngIf="item['type'] === 'bundle'"
                class="img special still"
                [src]="'/assets/base/images/bundles/' + item['image'] + '.png'"
                [alt]="item['alt']"
              />
            </div>
            <div class="box-text">
              <p class="category-title-first">{{ item["name"] }}</p>
              <p class="category-title-fifth">{{ item["collection"] }}</p>
            </div>
            <div class="box-buttons">
              <button class="price price-text">
                <img
                  src="/assets/base/images/icons/ioi-big.svg"
                  alt="ioi token"
                />
                {{ item["price"] }}
              </button>
            </div>
          </div>
        </div>
      </div>
      <div class="market-paging">
        <ng-container *ngIf="newProducts.length > inRow"
          ><div class="page-left">
            <button
              (click)="prevPageCars()"
              [disabled]="timeoutPage || sliceStart <= 0"
              class="pagebtn-l"
            >
              <img
                class="red-box-detail paging-img"
                [ngClass]="{
                  'page-opacity': sliceStart === 0,
                  'arrow-animation': animateArrow === true
                }"
                src="/assets/base/images/icons/icon-back-red.svg"
                alt="red back icon"
              />
            </button>
          </div>
          <div class="page-middle">
            <p class="category-title-fourth">
              page
              <span class="leftspan">{{ currentPage }} / {{ lastPage }}</span>
            </p>
          </div>
          <div class="page-right">
            <button
              [ngClass]="{
                'arrow-animation': animateArrowRight === true
              }"
              (click)="nextPageCars(); scrollTop(myScroll)"
              [disabled]="
                timeoutPage || currentPage >= newProducts.length / inRow
              "
              class="pagebtn-r"
            >
              <img
                class="red-box-detail paging-img"
                [ngClass]="{
                  'page-opacity': sliceMiddle >= this.newProducts.length
                }"
                src="/assets/base/images/icons/icon-next-red.svg"
                alt="red next icon"
              />
            </button></div
        ></ng-container>
      </div>
    </div>
  </div>
  <app-home-nft-detail
    class="detail-content"
    *ngIf="marketState === 2"
    [assetId]="selectedId"
    [assetType]="selectedType"
    [assetPosition]="selectedPosition"
    (marketState)="showAssetBuy($event)"
  ></app-home-nft-detail>
</div>

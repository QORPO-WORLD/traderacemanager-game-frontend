
<div class="main-holder">

  <div class="top-banner-holder" *ngIf=" stepIndex === 1">
    <app-main-top-banner [page]="'fuel-car1'"></app-main-top-banner>
  </div>

  <div class="top-banner-holder" *ngIf="stepIndex === 2">
    <app-main-top-banner [page]="'fuel-car2'"></app-main-top-banner>
  </div>

  <div class="top-banner-holder" *ngIf="stepIndex === 3">
    <app-main-top-banner [page]="'fuel-car4'"></app-main-top-banner>
  </div>

  <div class="top-banner-holder" *ngIf="stepIndex === 5">
    <app-main-top-banner [page]="'fuel-car3'"></app-main-top-banner>
  </div>

  <div class="top-banner-holder" *ngIf="stepIndex === 6">
    <app-main-top-banner [page]="'fuel-car5'"></app-main-top-banner>
  </div>

  
  <div class="menu-holder">
    <div class="fuel-menu" [ngClass]="'state' + stepIndex">
      <div class="menu-desc">
          <p class="pick-car">1. {{'fuel_car.pick_car' | translate}}</p>
          <p class="pick-fuel">2. {{'fuel_car.pick_fuel' | translate}}</p>
          <p class="summary">3. {{'fuel_car.summary' | translate}}</p>
      </div>
      <div class="menu-line">
          <div class="inner-line">&nbsp;</div>
      </div>
    </div>
    

    <ng-container *ngIf="stepIndex === 2">
      <button [disabled]="selectedCarsToRace[selectedCarIndex]?.fuel !== 100" class="next-button" *ngIf="sumFuel / sumlength !== 100"
        [ngClass]="{'active': selectedCarsToRace[selectedCarIndex]?.fuel === 100}" (click)="selectedCarIndex = selectedCarIndex + 1;calcSumFuel()">
          <div class="border-maker"></div>
          <p>{{'race.continue' | translate}} <img src="/assets/base/images/tankovanie/next-icon.png" alt=""></p>
      </button>

      <button [disabled]="sumFuel / sumlength !== 100" class="next-button" *ngIf="sumFuel / sumlength === 100"
        [ngClass]="{'active': sumFuel / sumlength === 100}" (click)="signupToRace()">
          <div class="border-maker"></div>
          <p>{{'race.continue' | translate}} <img src="/assets/base/images/tankovanie/next-icon.png" alt=""></p>
      </button>
    </ng-container>


  </div>

  <div class="step-cont visible  step2"  *ngIf=" stepIndex === 2">

    <div class="content-holder">
      
      <div class="content-box box1">
        <div class="box-heading">
          <p class="heading">1,Pick a fuel</p>
          <p class="desc">Pick three crypto currencies, one by one</p>
          <p class="coins-ind">{{selectedCarsToRace[selectedCarIndex]?.selectedBets.length}}/3</p>
        </div>

        <div class="carousel-holder">
          <div class="inner-item-holder" [ngClass]="{'only-favs': favFilter === true}">
    
            <ng-container *ngFor="let majbet of selectedCarsToRace[selectedCarIndex]?.bet">
              <div class="item-holder" [ngClass]="{'fav': majbet.favourite === true}">
                 <div class="item-curr" (click)="toggleCoin(majbet.customIndex)" [ngClass]="{'selected': majbet.selected === true}">
                  <img [src]="'/assets/base/images/curr-logos/'+ majbet.symbol +'-logo.png'" alt="">
                  <p class="item-symbol">{{majbet.symbol}}</p>
                  </div>
              </div>
            </ng-container>
            
          </div>
        </div>

        <p class="choose-text">or choose</p>

        <div class="top-btns">
          <div class="btn-item premium inactive" *ngIf="myTeam === undefined || myTeam === ''">
            <p><img src="/assets/base/images/tankovanie/premium-icon.png" alt=""> {{'fuel_car.premium_fuel' | translate}}</p>
          </div>
          <div class="btn-item premium" *ngIf="myTeam !== undefined && myTeam !== ''" (click)="fuelBest()">
            <p><img src="/assets/base/images/tankovanie/premium-icon.png" alt=""> {{'fuel_car.premium_fuel' | translate}}</p>
          </div>

          <div class="btn-item" (click)="generateAutomaticBetsOnce()">
            <p><img src="/assets/base/images/tankovanie/lucky-icon.png" alt=""> {{'fuel_car.lucky_fuel' | translate}}</p>
          </div>
        </div>
      </div>

      <div class="content-box box2">

        <div class="box-heading">
          <p class="heading">2,Analyze</p>
          <p class="desc">Long or short a currency based on analysis</p>
        </div>

        <div class="graphs-holder">
          <app-indicator [type]="selectedSymbol" *ngIf="selectedSymbol"></app-indicator>
        </div>
        
        <div class="bottom-part">
          <div class="sliders" *ngIf="selectedCarsToRace[selectedCarIndex]?.selectedBets?.length < 3">
            
    
            <div class="items-holder">
              <div class="curr-item">
                <div class="curr-img"></div>
                <div class="input-holder">
                  <p class="percent-info">0%</p>
                  <input type="range" min="0"  step="1"  max="90" disabled value="0">
                </div>
                <div class="top-btns">
                  <div class="btn-item short">
                    <p><img src="/assets/base/images/icons/short-icon.svg" alt=""> Short</p>
                  </div>
                  <div class="btn-item long">
                    <p><img src="/assets/base/images/icons/long-icon.svg" alt=""> Long</p>
                  </div>
                </div>
              </div>
      
              <div class="curr-item">
                <div class="curr-img"></div>
                <div class="input-holder">
                  <p class="percent-info">0%</p>
                  <input type="range" min="0"  step="1"  max="90" disabled value="0">
                </div>
                <div class="top-btns">
                  <div class="btn-item short">
                    <p><img src="/assets/base/images/icons/short-icon.svg" alt=""> Short</p>
                  </div>
        
                  <div class="btn-item long">
                    <p><img src="/assets/base/images/icons/long-icon.svg" alt=""> Long</p>
                  </div>
                </div>
              </div>
      
              <div class="curr-item">
                <div class="curr-img"></div>
                <div class="input-holder">
                  <p class="percent-info">0%</p>
                  <input type="range" min="0"  step="1"  max="90" disabled value="0">
                </div>
                <div class="top-btns">
                  <div class="btn-item short">
                    <p><img src="/assets/base/images/icons/short-icon.svg" alt=""> Short</p>
                  </div>
        
                  <div class="btn-item long">
                    <p><img src="/assets/base/images/icons/long-icon.svg" alt=""> Long</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
    
          <div class="sliders" *ngIf="selectedCarsToRace[selectedCarIndex]?.selectedBets?.length > 2">
            
    
            <div class="items-holder">
              <div class="curr-item">
                <div class="curr-img selected">
                  <img [src]="'/assets/base/images/curr-logos/'+ selectedCarsToRace[selectedCarIndex]?.bet[selectedCarsToRace[selectedCarIndex]?.selectedBets[0]].symbol +'-logo.png'" alt="">
                </div>
                <div class="input-holder">
                  <p class="percent-info" [ngStyle]="{'left': 'calc(' + ((selectedCarsToRace[selectedCarIndex]?.bet[selectedCarsToRace[selectedCarIndex]?.selectedBets[0]].bet * 100) / 90) + '% + ' + (8 - ((selectedCarsToRace[selectedCarIndex]?.bet[selectedCarsToRace[selectedCarIndex]?.selectedBets[0]].bet * 100) / 90 * 0.3)) + 'px)', 'transform': 'translateX(-4px)'}">{{selectedCarsToRace[selectedCarIndex]?.bet[selectedCarsToRace[selectedCarIndex]?.selectedBets[0]].bet}}%</p>
                  <input type="range" min="0"  step="1"  max="90" value="0" [(ngModel)]="selectedCarsToRace[selectedCarIndex]?.bet[selectedCarsToRace[selectedCarIndex]?.selectedBets[0]].bet" 
                  [ngModelOptions]="{standalone: true}" (change)="changeFuel($event, selectedCarsToRace[selectedCarIndex]?.bet[selectedCarsToRace[selectedCarIndex]?.selectedBets[0]]?.customIndex)">
                </div>
                <div class="top-btns active">
                  <button class="btn-item short" (click)="selectedCarsToRace[selectedCarIndex]?.bet[selectedCarsToRace[selectedCarIndex]?.selectedBets[0]].short = true"
                  [ngClass]="selectedCarsToRace[selectedCarIndex]?.bet[selectedCarsToRace[selectedCarIndex]?.selectedBets[0]].short === true ? 'active' : 'passive'">
                    <p><img src="/assets/base/images/icons/short-icon.svg" alt=""> Short</p>
                  </button>
        
                  <button class="btn-item long" (click)="selectedCarsToRace[selectedCarIndex]?.bet[selectedCarsToRace[selectedCarIndex]?.selectedBets[0]].short = false"
                  [ngClass]="selectedCarsToRace[selectedCarIndex]?.bet[selectedCarsToRace[selectedCarIndex]?.selectedBets[0]].short === false ? 'active' : 'passive'">
                    <p><img src="/assets/base/images/icons/long-icon.svg" alt=""> Long</p>
                  </button>
                </div>
              </div>
      
              <div class="curr-item">
                <div class="curr-img selected">
                  <img [src]="'/assets/base/images/curr-logos/'+ selectedCarsToRace[selectedCarIndex]?.bet[selectedCarsToRace[selectedCarIndex]?.selectedBets[1]].symbol +'-logo.png'" alt="">
                </div>
                <div class="input-holder">
                    <p class="percent-info" [ngStyle]="{'left': 'calc(' + ((selectedCarsToRace[selectedCarIndex]?.bet[selectedCarsToRace[selectedCarIndex]?.selectedBets[1]].bet * 100) / 90) + '% + ' + (8 - ((selectedCarsToRace[selectedCarIndex]?.bet[selectedCarsToRace[selectedCarIndex]?.selectedBets[1]].bet * 100) / 90 * 0.3)) + 'px)', 'transform': 'translateX(-4px)'}">{{selectedCarsToRace[selectedCarIndex]?.bet[selectedCarsToRace[selectedCarIndex]?.selectedBets[1]].bet}}%</p>
                  <input type="range" min="0"  step="1"  max="90" value="0" [(ngModel)]="selectedCarsToRace[selectedCarIndex]?.bet[selectedCarsToRace[selectedCarIndex]?.selectedBets[1]].bet" 
                  [ngModelOptions]="{standalone: true}" (change)="changeFuel($event, selectedCarsToRace[selectedCarIndex]?.bet[selectedCarsToRace[selectedCarIndex]?.selectedBets[1]]?.customIndex)">
                </div>
                <div class="top-btns active">
                  <button class="btn-item short" (click)="selectedCarsToRace[selectedCarIndex]?.bet[selectedCarsToRace[selectedCarIndex]?.selectedBets[1]].short = true"
                  [ngClass]="selectedCarsToRace[selectedCarIndex]?.bet[selectedCarsToRace[selectedCarIndex]?.selectedBets[1]].short === true ? 'active' : 'passive'">
                    <p><img src="/assets/base/images/icons/short-icon.svg" alt=""> Short</p>
                  </button>
        
                  <button class="btn-item long" (click)="selectedCarsToRace[selectedCarIndex]?.bet[selectedCarsToRace[selectedCarIndex]?.selectedBets[1]].short = false"
                  [ngClass]="selectedCarsToRace[selectedCarIndex]?.bet[selectedCarsToRace[selectedCarIndex]?.selectedBets[1]].short === false ? 'active' : 'passive'">
                    <p><img src="/assets/base/images/icons/long-icon.svg" alt=""> Long</p>
                  </button>
                </div>
              </div>
      
              <div class="curr-item">
                <div class="curr-img selected">
                  <img [src]="'/assets/base/images/curr-logos/'+ selectedCarsToRace[selectedCarIndex]?.bet[selectedCarsToRace[selectedCarIndex]?.selectedBets[2]].symbol +'-logo.png'" alt="">
                </div>
                <div class="input-holder">
                  <p class="percent-info" [ngStyle]="{'left': 'calc(' + ((selectedCarsToRace[selectedCarIndex]?.bet[selectedCarsToRace[selectedCarIndex]?.selectedBets[2]].bet * 100) / 90) + '% + ' + (8 - ((selectedCarsToRace[selectedCarIndex]?.bet[selectedCarsToRace[selectedCarIndex]?.selectedBets[2]].bet * 100) / 90 * 0.3)) + 'px)', 'transform': 'translateX(-4px)'}">{{selectedCarsToRace[selectedCarIndex]?.bet[selectedCarsToRace[selectedCarIndex]?.selectedBets[2]].bet}}%</p>
                  <input type="range" min="0"  step="1"  max="90" value="0" [(ngModel)]="selectedCarsToRace[selectedCarIndex]?.bet[selectedCarsToRace[selectedCarIndex]?.selectedBets[2]].bet"
                   [ngModelOptions]="{standalone: true}" (change)="changeFuel($event, selectedCarsToRace[selectedCarIndex]?.bet[selectedCarsToRace[selectedCarIndex]?.selectedBets[2]]?.customIndex)">
      
                </div>
                <div class="top-btns active">
                  <button class="btn-item short" (click)="selectedCarsToRace[selectedCarIndex]?.bet[selectedCarsToRace[selectedCarIndex]?.selectedBets[2]].short = true"
                  [ngClass]="selectedCarsToRace[selectedCarIndex]?.bet[selectedCarsToRace[selectedCarIndex]?.selectedBets[2]].short === true ? 'active' : 'passive'">
                    <p><img src="/assets/base/images/icons/short-icon.svg" alt=""> Short</p>
                  </button>
        
                  <button class="btn-item long" (click)="selectedCarsToRace[selectedCarIndex]?.bet[selectedCarsToRace[selectedCarIndex]?.selectedBets[2]].short = false"
                  [ngClass]="selectedCarsToRace[selectedCarIndex]?.bet[selectedCarsToRace[selectedCarIndex]?.selectedBets[2]].short === false ? 'active' : 'passive'">
                    <p><img src="/assets/base/images/icons/long-icon.svg" alt=""> Long</p>
                  </button>
                </div>
              </div>
            </div>
          </div>
  
          <div class="svg-holder">
            <div class="svg-item">
              <svg width="100%" height="100%" viewBox="0 0 40 40" class="donut">
                <defs>
                  <filter id="f2" x="-30%" y="-30%" width="160%" height="160%">
                    <feOffset result="offOut" in="SourceGraphic" dx="0" dy="0" />
                    <feGaussianBlur result="blurOut" in="offOut" stdDeviation="1.3" />
                    <feBlend in="SourceGraphic" in2="blurOut" mode="normal" />
                  </filter>
                  <linearGradient id="linear" x1="5%" y1="0%" x2="90%" y2="0%" x3="20%" y3="0%" spreadMethod="pad">
                    <stop offset="0%"   stop-color="#e34b7d"/>
                    <stop offset="50%"   stop-color="#EB2163"/>
                    <stop offset="100%" stop-color="#950552"/>
                  </linearGradient>
                </defs>
                <circle class="donut-hole" cx="20" cy="20" r="15.91549430918954" fill="black"></circle>
                <circle class="donut-ring" cx="20" cy="20" r="15.91549430918954" fill="transparent" stroke-width="3.5"></circle>
      
                <circle filter="url(#f2)" stroke="url(#linear)" class="donut-segment" cx="20" cy="20" r="15.91549430918954" fill="transparent" 
                stroke-width="3" stroke-dashoffset="25" [ngStyle]="{'stroke-dasharray': selectedCarsToRace[selectedCarIndex]?.fuel + ' ' + (100 - selectedCarsToRace[selectedCarIndex]?.fuel)}"></circle>
      
                <g class="donut-text donut-text-1">
            
                  <text y="52%" transform="translate(0, 2)">
                    <tspan x="52%" text-anchor="middle" class="donut-percent">{{selectedCarsToRace[selectedCarIndex]?.fuel | number:'1.0-0':'fr'}}%</tspan>   
                  </text>
                </g>
              </svg>
            </div>
          </div>
        </div>

      </div>

    </div>

    <!-- <button class="back-button" (click)="stepIndex = 1" *ngIf="firstLogin === false && (selectedCarIndex < 1 ||  sumFuel / sumlength === 100) && selectedCarsToRace[selectedCarIndex]?.selectedBets?.length < 3">GO BACK</button>
    <button class="back-button" (click)="resetSelected();calcSumFuel()" *ngIf="selectedCarsToRace[selectedCarIndex]?.selectedBets?.length === 3 && introModal === false">GO BACK</button>
    <button *ngIf="selectedCarIndex > 0 && sumFuel / sumlength !== 100 && selectedCarsToRace[selectedCarIndex]?.selectedBets?.length < 3 && introModal === false" (click)="selectedCarIndex = selectedCarIndex - 1;calcSumFuel()" class="back-button">GO BACK</button>

    <button *ngIf="introModal === true && tutorialIndex === 3" (click)="skipModal()" class="close-tutorial"><span>3/6</span> Skip</button>
    <button *ngIf="introModal === true && tutorialIndex === 5" (click)="skipModal()" class="close-tutorial"><span>5/6</span> Skip</button> -->
  
  
  </div>

  <div class="bottom-panels">

    <div class="hint-panel create-fast" *ngIf="stepIndex !== 1">
      <div class="icon-holder">
        <img src="/assets/base/images/tankovanie/bulb-icon.png" alt="">
      </div>
      <div class="text-holder">
        <p class="heading">{{'fuel_car.get_premium' | translate}}</p>
        <p>{{'fuel_car.get_premium_text' | translate}}</p>
      </div>
      <div class="fast-fuel-btn" style="display:none" [routerLink]="['/teams/join-teams']">
        <p>{{'teams.shared.join' | translate}} <span>></span></p>
      </div>
    </div>

</div>



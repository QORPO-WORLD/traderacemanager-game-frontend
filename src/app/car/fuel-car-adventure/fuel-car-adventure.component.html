

<h2 class="loading" *ngIf="!myCars">{{'fuel_car.loading' | translate}}</h2>

<div class="main-holder" *ngIf="myCars?.length > 0">

  <div class="top-banner-holder cops-banner" *ngIf="stepIndex === 0">
    <div class="tasks-banner">

      <div class="deposit-item item cops-banner">
        <h1>It's a challenge </h1>
        <h2>What difficulty do you choose?</h2>
      </div>
    </div>
  </div>
    
  <div class="top-banner-holder" *ngIf=" stepIndex === 1">
    <app-main-top-banner [page]="'fuel-car1'"></app-main-top-banner>
  </div>

  <div class="top-banner-holder" *ngIf="stepIndex === 2">
    <app-main-top-banner [page]="'fuel-car2'"></app-main-top-banner>
  </div>

  <div class="top-banner-holder" *ngIf="stepIndex === 3">
    <app-main-top-banner [page]="'fuel-car4'"></app-main-top-banner>
  </div>

  <div class="top-banner-holder" *ngIf="stepIndex === 5">
    <app-main-top-banner [page]="'fuel-car3'"></app-main-top-banner>
  </div>

  <div class="top-banner-holder" *ngIf="stepIndex === 6">
    <app-main-top-banner [page]="'fuel-car5'"></app-main-top-banner>
  </div>

  
  <div class="menu-holder">
    <div class="fuel-menu" [ngClass]="'state' + stepIndex">
      <div class="menu-desc">
        <p class="choose-difficulty">1. CHOOSE DIFFICULTY</p>
        <p class="pick-car">2. PICK A CAR</p>
        <p class="pick-fuel">3. PICK A FUEL</p>
        <p class="summary">4. SUMMARY</p>
      </div>
      <div class="menu-line">
          <div class="inner-line">&nbsp;</div>
      </div>
    </div>

    <ng-container *ngIf=" stepIndex === 0">
      <button class="next-button" 
        [ngClass]="{'active': difficultyTier != null}" (click)="stepIndex = 1">
          <div class="border-maker"></div>
          <p>Continue <img src="/assets/base/images/tankovanie/next-icon.png" alt=""></p>
      </button>
    </ng-container>

    <ng-container *ngIf=" stepIndex === 1">
      <button [disabled]="selectedCarsToRace?.length === 0" class="next-button" 
        [ngClass]="{'active': selectedCarsToRace?.length > 0}" (click)="stepIndex = 2; tutorialSecondStep()">
          <div class="border-maker"></div>
          <p>{{'race.continue' | translate}} <img src="/assets/base/images/tankovanie/next-icon.png" alt=""></p>
      </button>
    </ng-container>
    

    <ng-container *ngIf="stepIndex === 2">
      <button [disabled]="selectedCarsToRace[selectedCarIndex]?.fuel !== 100" class="next-button" *ngIf="sumFuel / sumlength !== 100"
        [ngClass]="{'active': selectedCarsToRace[selectedCarIndex]?.fuel === 100}" (click)="selectedCarIndex = selectedCarIndex + 1;calcSumFuel()">
          <div class="border-maker"></div>
          <p>{{'race.continue' | translate}} <img src="/assets/base/images/tankovanie/next-icon.png" alt=""></p>
      </button>

      <button [disabled]="sumFuel / sumlength !== 100" class="next-button" *ngIf="sumFuel / sumlength === 100"
        [ngClass]="{'active': sumFuel / sumlength === 100}" (click)="stepIndex = 5; calcPossibleMultibet(); tutorialLastStep()">
          <div class="border-maker"></div>
          <p>{{'race.continue' | translate}} <img src="/assets/base/images/tankovanie/next-icon.png" alt=""></p>
      </button>
    </ng-container>

    <ng-container *ngIf="stepIndex === 3">
      <button class="next-button" (click)="stepIndex = 2; useManualFuel(); tutorialFourthStep()"
      [disabled]="selectedCarsToRace[selectedCarIndex]?.selectedBets?.length < 3"
      [ngClass]="{'active': selectedCarsToRace[selectedCarIndex]?.selectedBets?.length === 3}">
        <div class="border-maker"></div>
        <p>{{'race.continue' | translate}} <img src="/assets/base/images/tankovanie/next-icon.png" alt=""></p>
      </button>
    </ng-container>

    <ng-container *ngIf="stepIndex === 5">
      <button class="next-button active" *ngIf="isLoading === true">
        <div class="border-maker"></div>
        <p>{{'fuel_car.loading' | translate}}</p>
      </button>

      <button *ngIf="isLoading === false" class="next-button active" (click)="signupToRace()">
        <div class="border-maker"></div>
        <p>{{'main_top_banner.heading5' | translate}} <img src="/assets/base/images/tankovanie/next-icon.png" alt=""></p>
      </button>

      <button  class="next-button active ticket-btn" (click)="useTicket = true;signupToRace()" *ngIf="isLoading === false && tickets > 0 && raceId === 'classic_tournament_10'">
        <div class="border-maker"></div>
        <p>Use ticket <img src="/assets/base/images/tankovanie/next-icon.png" alt=""></p>
      </button> 
    </ng-container>

    <ng-container *ngIf="stepIndex === 6">
      <button class="next-button active" (click)="stepIndex = 5">
        <div class="border-maker"></div>
        <p>{{'race.continue' | translate}} <img src="/assets/base/images/tankovanie/next-icon.png" alt=""></p>
      </button>
    </ng-container>

  </div>

  <div class="step-cont step0 visible" *ngIf="stepIndex === 0">

    <div class="content-holder">

      <div class="overview-holder">
        <div class="left-part">

          <ul id="select-difficulty">
            <li
              [ngClass]="{ selected: difficultyTier === 1 }"
              (click)="selectDifficultyTier(1)"
              class="small-box"
            >
              <div class="select-indicator"></div>
              <img src="assets/base/images/zavod/car_29_vert.png" />
            </li>
            <li 
              [ngClass]="{ selected: difficultyTier === 2 }"
              (click)="selectDifficultyTier(2)"
              class="mid-box"
            >
              <div class="select-indicator"></div>
              <img src="assets/base/images/zavod/car_29_vert.png" />
              <img src="assets/base/images/zavod/car_30_vert.png" />
            </li>
            <li
              [ngClass]="{ selected: difficultyTier === 3 }"
              (click)="selectDifficultyTier(3)"
              class="big-box"
            >
              <div class="select-indicator"></div>
              <img src="assets/base/images/zavod/car_29_vert.png" />
              <img src="assets/base/images/zavod/car_30_vert.png" />
              <img src="assets/base/images/zavod/car_31_vert.png" />
            </li>
          </ul>

        </div>

        <div class="right-part">
          <ul id="summary">
            <li>Difficulty
              <div>{{ difficultyTier }}</div>
            </li>
            <li>Your bet
              <div>
                <img src="assets\base\images\tankovanie\trx-token.png" />{{ actualRaceAmount }} TRX
              </div>
            </li>
            <li>Your potential win
              <div>
                <span class="ioi-text-gradient">{{ (actualRaceAmount * (difficultyTier + 1) * 0.8) }} TRX</span>
              </div>
            </li>
          </ul>
        </div>

      </div>

    </div>
    

    <button *ngIf="introModal === true" (click)="skipModal()" class="close-tutorial"><span>2/6</span> Skip</button>



  </div>

  <div class="step-cont visible  step1" *ngIf="stepIndex === 1">


    <div class="content-holder">

      <div class="cars-list">
        <p class="segment-heading">{{'fuel_car.pick_car' | translate}}</p>
        <div class="cars-holder">
          <ng-container *ngFor="let car of myCars;let i = index">
            <div class="car-item" (click)="switchSelectCarToRace(i)">

              <div class="select-indicator" [ngClass]="{'active': myCars[i]?.selected === true}"></div>
              <img [src]="'/assets/base/images/cars/car' + car.car_model + '.png'" alt="">

            </div>
          </ng-container>
        </div>
      </div>

      <div class="overview-holder">
        <div class="left-part">

          <div class="box-item">
            <p class="desc">{{'fuel_car.cars' | translate}}</p>
            <div class="box">
              <p>{{selectedCarsToRace?.length}}</p>
            </div>
          </div>

          <div class="box-item">
            <p class="desc">{{'fuel_car.chance_to_win' | translate}}</p> 
            <div class="box">
              <p class="chance">{{selectedCarsToRace.length}} : {{difficultyTier + 1}}</p>
            </div>
          </div>

          <div class="box-item">
            <p class="desc">{{'fuel_car.your_bet' | translate}}</p>
            <div class="box">
              <p *ngIf="currency === 'TRX'"><img src="/assets/base/images/tankovanie/trx-token.png" alt="">{{actualRaceAmount * selectedCarsToRace?.length}} {{'shared.trx' | translate}}</p>
              <p *ngIf="currency === 'IOI'"><img src="/assets/base/images/tankovanie/ioi-token.png" alt="">{{actualRaceAmount * selectedCarsToRace?.length}} {{'shared.ioi' | translate}}</p>
            </div>
          </div>



        </div>
        <div class="right-part">
          <div class="chances-box">
            <div class="icon-holder">
              <img src="/assets/base/images/tankovanie/bulb-icon.png" alt="">
            </div>
            <div class="text-holder">
              <p class="heading">{{'fuel_car.multiply_chances' | translate}}</p>
              <p>{{'fuel_car.increase_chance' | translate}}</p>
            </div>
          </div>
        </div>
      </div>

    </div>

  </div>

  <div class="step-cont visible  step2"  *ngIf=" stepIndex === 2">

    <div class="content-holder">
      
      <div class="content-box box1">
        <div class="box-heading">
          <p class="heading">1,Pick a fuel</p>
          <p class="desc">Pick three crypto currencies, one by one</p>
          <p class="coins-ind">{{selectedCarsToRace[selectedCarIndex]?.selectedBets.length}}/3</p>
        </div>

        <div class="carousel-holder">
          <div class="inner-item-holder" [ngClass]="{'only-favs': favFilter === true}">
    
            <ng-container *ngFor="let majbet of selectedCarsToRace[selectedCarIndex]?.bet | orderBy: order:reverse">
              <div class="item-holder" [ngClass]="{'fav': majbet.favourite === true}">
                <div class="item-curr" (click)="toggleCoin(majbet.customIndex)" [ngClass]="{'selected': majbet.selected === true}">
                  <img [src]="'/assets/base/images/curr-logos/'+ majbet.symbol +'-logo.png'" alt="">
                  <p class="item-symbol">{{majbet.symbol}}</p>
                  </div>
              </div>
            </ng-container>
            
          </div>
        </div>

        <p class="choose-text">or choose</p>

        <div class="top-btns">
          <div class="btn-item premium inactive" *ngIf="myTeam === undefined || myTeam === ''">
            <p><img src="/assets/base/images/tankovanie/premium-icon.png" alt=""> {{'fuel_car.premium_fuel' | translate}}</p>
          </div>
          <div class="btn-item premium" *ngIf="myTeam !== undefined && myTeam !== ''" (click)="fuelBest()">
            <p><img src="/assets/base/images/tankovanie/premium-icon.png" alt=""> {{'fuel_car.premium_fuel' | translate}}</p>
          </div>

          <div class="btn-item" (click)="generateAutomaticBetsOnce()">
            <p><img src="/assets/base/images/tankovanie/lucky-icon.png" alt=""> {{'fuel_car.lucky_fuel' | translate}}</p>
          </div>
        </div>
      </div>

      <div class="content-box box2">

        <div class="box-heading">
          <p class="heading">2,Analyze</p>
          <p class="desc">Long or short a currency based on analysis</p>
        </div>

        <div class="graphs-holder">
          <app-indicator [type]="selectedSymbol" *ngIf="selectedSymbol"></app-indicator>
        </div>
        
        <div class="bottom-part">
          <div class="sliders" *ngIf="selectedCarsToRace[selectedCarIndex]?.selectedBets?.length < 3">
            
    
            <div class="items-holder">
              <div class="curr-item">
                <div class="curr-img"></div>
                <div class="input-holder">
                  <p class="percent-info">0%</p>
                  <input type="range" min="0"  step="1"  max="90" disabled value="0">
                </div>
                <div class="top-btns">
                  <div class="btn-item short">
                    <p><img src="/assets/base/images/icons/short-icon.svg" alt=""> Short</p>
                  </div>
                  <div class="btn-item long">
                    <p><img src="/assets/base/images/icons/long-icon.svg" alt=""> Long</p>
                  </div>
                </div>
              </div>
      
              <div class="curr-item">
                <div class="curr-img"></div>
                <div class="input-holder">
                  <p class="percent-info">0%</p>
                  <input type="range" min="0"  step="1"  max="90" disabled value="0">
                </div>
                <div class="top-btns">
                  <div class="btn-item short">
                    <p><img src="/assets/base/images/icons/short-icon.svg" alt=""> Short</p>
                  </div>
        
                  <div class="btn-item long">
                    <p><img src="/assets/base/images/icons/long-icon.svg" alt=""> Long</p>
                  </div>
                </div>
              </div>
      
              <div class="curr-item">
                <div class="curr-img"></div>
                <div class="input-holder">
                  <p class="percent-info">0%</p>
                  <input type="range" min="0"  step="1"  max="90" disabled value="0">
                </div>
                <div class="top-btns">
                  <div class="btn-item short">
                    <p><img src="/assets/base/images/icons/short-icon.svg" alt=""> Short</p>
                  </div>
        
                  <div class="btn-item long">
                    <p><img src="/assets/base/images/icons/long-icon.svg" alt=""> Long</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
    
          <div class="sliders" *ngIf="selectedCarsToRace[selectedCarIndex]?.selectedBets?.length > 2">
            
    
            <div class="items-holder">
              <div class="curr-item">
                <div class="curr-img selected">
                  <img [src]="'/assets/base/images/curr-logos/'+ selectedCarsToRace[selectedCarIndex]?.bet[selectedCarsToRace[selectedCarIndex]?.selectedBets[0]].symbol +'-logo.png'" alt="">
                </div>
                <div class="input-holder">
                  <p class="percent-info" [ngStyle]="{'left': 'calc(' + ((selectedCarsToRace[selectedCarIndex]?.bet[selectedCarsToRace[selectedCarIndex]?.selectedBets[0]].bet * 100) / 90) + '% + ' + (8 - ((selectedCarsToRace[selectedCarIndex]?.bet[selectedCarsToRace[selectedCarIndex]?.selectedBets[0]].bet * 100) / 90 * 0.3)) + 'px)', 'transform': 'translateX(-4px)'}">{{selectedCarsToRace[selectedCarIndex]?.bet[selectedCarsToRace[selectedCarIndex]?.selectedBets[0]].bet}}%</p>
                  <input type="range" min="0"  step="1"  max="90" value="0" [(ngModel)]="selectedCarsToRace[selectedCarIndex]?.bet[selectedCarsToRace[selectedCarIndex]?.selectedBets[0]].bet" 
                  [ngModelOptions]="{standalone: true}" (change)="changeFuel($event, selectedCarsToRace[selectedCarIndex]?.bet[selectedCarsToRace[selectedCarIndex]?.selectedBets[0]]?.customIndex)">
                </div>
                <div class="top-btns active">
                  <button class="btn-item short" (click)="selectedCarsToRace[selectedCarIndex]?.bet[selectedCarsToRace[selectedCarIndex]?.selectedBets[0]].short = true"
                  [ngClass]="selectedCarsToRace[selectedCarIndex]?.bet[selectedCarsToRace[selectedCarIndex]?.selectedBets[0]].short === true ? 'active' : 'passive'">
                    <p><img src="/assets/base/images/icons/short-icon.svg" alt=""> Short</p>
                  </button>
        
                  <button class="btn-item long" (click)="selectedCarsToRace[selectedCarIndex]?.bet[selectedCarsToRace[selectedCarIndex]?.selectedBets[0]].short = false"
                  [ngClass]="selectedCarsToRace[selectedCarIndex]?.bet[selectedCarsToRace[selectedCarIndex]?.selectedBets[0]].short === false ? 'active' : 'passive'">
                    <p><img src="/assets/base/images/icons/long-icon.svg" alt=""> Long</p>
                  </button>
                </div>
              </div>
      
              <div class="curr-item">
                <div class="curr-img selected">
                  <img [src]="'/assets/base/images/curr-logos/'+ selectedCarsToRace[selectedCarIndex]?.bet[selectedCarsToRace[selectedCarIndex]?.selectedBets[1]].symbol +'-logo.png'" alt="">
                </div>
                <div class="input-holder">
                    <p class="percent-info" [ngStyle]="{'left': 'calc(' + ((selectedCarsToRace[selectedCarIndex]?.bet[selectedCarsToRace[selectedCarIndex]?.selectedBets[1]].bet * 100) / 90) + '% + ' + (8 - ((selectedCarsToRace[selectedCarIndex]?.bet[selectedCarsToRace[selectedCarIndex]?.selectedBets[1]].bet * 100) / 90 * 0.3)) + 'px)', 'transform': 'translateX(-4px)'}">{{selectedCarsToRace[selectedCarIndex]?.bet[selectedCarsToRace[selectedCarIndex]?.selectedBets[1]].bet}}%</p>
                  <input type="range" min="0"  step="1"  max="90" value="0" [(ngModel)]="selectedCarsToRace[selectedCarIndex]?.bet[selectedCarsToRace[selectedCarIndex]?.selectedBets[1]].bet" 
                  [ngModelOptions]="{standalone: true}" (change)="changeFuel($event, selectedCarsToRace[selectedCarIndex]?.bet[selectedCarsToRace[selectedCarIndex]?.selectedBets[1]]?.customIndex)">
                </div>
                <div class="top-btns active">
                  <button class="btn-item short" (click)="selectedCarsToRace[selectedCarIndex]?.bet[selectedCarsToRace[selectedCarIndex]?.selectedBets[1]].short = true"
                  [ngClass]="selectedCarsToRace[selectedCarIndex]?.bet[selectedCarsToRace[selectedCarIndex]?.selectedBets[1]].short === true ? 'active' : 'passive'">
                    <p><img src="/assets/base/images/icons/short-icon.svg" alt=""> Short</p>
                  </button>
        
                  <button class="btn-item long" (click)="selectedCarsToRace[selectedCarIndex]?.bet[selectedCarsToRace[selectedCarIndex]?.selectedBets[1]].short = false"
                  [ngClass]="selectedCarsToRace[selectedCarIndex]?.bet[selectedCarsToRace[selectedCarIndex]?.selectedBets[1]].short === false ? 'active' : 'passive'">
                    <p><img src="/assets/base/images/icons/long-icon.svg" alt=""> Long</p>
                  </button>
                </div>
              </div>
      
              <div class="curr-item">
                <div class="curr-img selected">
                  <img [src]="'/assets/base/images/curr-logos/'+ selectedCarsToRace[selectedCarIndex]?.bet[selectedCarsToRace[selectedCarIndex]?.selectedBets[2]].symbol +'-logo.png'" alt="">
                </div>
                <div class="input-holder">
                  <p class="percent-info" [ngStyle]="{'left': 'calc(' + ((selectedCarsToRace[selectedCarIndex]?.bet[selectedCarsToRace[selectedCarIndex]?.selectedBets[2]].bet * 100) / 90) + '% + ' + (8 - ((selectedCarsToRace[selectedCarIndex]?.bet[selectedCarsToRace[selectedCarIndex]?.selectedBets[2]].bet * 100) / 90 * 0.3)) + 'px)', 'transform': 'translateX(-4px)'}">{{selectedCarsToRace[selectedCarIndex]?.bet[selectedCarsToRace[selectedCarIndex]?.selectedBets[2]].bet}}%</p>
                  <input type="range" min="0"  step="1"  max="90" value="0" [(ngModel)]="selectedCarsToRace[selectedCarIndex]?.bet[selectedCarsToRace[selectedCarIndex]?.selectedBets[2]].bet"
                   [ngModelOptions]="{standalone: true}" (change)="changeFuel($event, selectedCarsToRace[selectedCarIndex]?.bet[selectedCarsToRace[selectedCarIndex]?.selectedBets[2]]?.customIndex)">
      
                </div>
                <div class="top-btns active">
                  <button class="btn-item short" (click)="selectedCarsToRace[selectedCarIndex]?.bet[selectedCarsToRace[selectedCarIndex]?.selectedBets[2]].short = true"
                  [ngClass]="selectedCarsToRace[selectedCarIndex]?.bet[selectedCarsToRace[selectedCarIndex]?.selectedBets[2]].short === true ? 'active' : 'passive'">
                    <p><img src="/assets/base/images/icons/short-icon.svg" alt=""> Short</p>
                  </button>
        
                  <button class="btn-item long" (click)="selectedCarsToRace[selectedCarIndex]?.bet[selectedCarsToRace[selectedCarIndex]?.selectedBets[2]].short = false"
                  [ngClass]="selectedCarsToRace[selectedCarIndex]?.bet[selectedCarsToRace[selectedCarIndex]?.selectedBets[2]].short === false ? 'active' : 'passive'">
                    <p><img src="/assets/base/images/icons/long-icon.svg" alt=""> Long</p>
                  </button>
                </div>
              </div>
            </div>
          </div>

          <p class="slide-desc">Slide right and fill the circle to 100%</p>
  
          <div class="svg-holder">
            <div class="svg-item">
              <svg width="100%" height="100%" viewBox="0 0 40 40" class="donut">
                <defs>
                  <filter id="f2" x="-30%" y="-30%" width="160%" height="160%">
                    <feOffset result="offOut" in="SourceGraphic" dx="0" dy="0" />
                    <feGaussianBlur result="blurOut" in="offOut" stdDeviation="1.3" />
                    <feBlend in="SourceGraphic" in2="blurOut" mode="normal" />
                  </filter>
                  <linearGradient id="linear" x1="5%" y1="0%" x2="90%" y2="0%" x3="20%" y3="0%" spreadMethod="pad">
                    <stop offset="0%"   stop-color="#e34b7d"/>
                    <stop offset="50%"   stop-color="#EB2163"/>
                    <stop offset="100%" stop-color="#950552"/>
                  </linearGradient>
                </defs>
                <circle class="donut-hole" cx="20" cy="20" r="15.91549430918954" fill="black"></circle>
                <circle class="donut-ring" cx="20" cy="20" r="15.91549430918954" fill="transparent" stroke-width="3.5"></circle>
      
                <circle filter="url(#f2)" stroke="url(#linear)" class="donut-segment" cx="20" cy="20" r="15.91549430918954" fill="transparent" 
                stroke-width="3" stroke-dashoffset="25" [ngStyle]="{'stroke-dasharray': selectedCarsToRace[selectedCarIndex]?.fuel + ' ' + (100 - selectedCarsToRace[selectedCarIndex]?.fuel)}"></circle>
      
                <g class="donut-text donut-text-1">
            
                  <text y="52%" transform="translate(0, 2)">
                    <tspan x="52%" text-anchor="middle" class="donut-percent">{{selectedCarsToRace[selectedCarIndex]?.fuel | number:'1.0-0':'fr'}}%</tspan>   
                  </text>
                </g>
              </svg>
            </div>
          </div>
        </div>

      </div>

    </div>

    <!-- <button class="back-button" (click)="stepIndex = 1" *ngIf="firstLogin === false && (selectedCarIndex < 1 ||  sumFuel / sumlength === 100) && selectedCarsToRace[selectedCarIndex]?.selectedBets?.length < 3">GO BACK</button>
    <button class="back-button" (click)="resetSelected();calcSumFuel()" *ngIf="selectedCarsToRace[selectedCarIndex]?.selectedBets?.length === 3 && introModal === false">GO BACK</button>
    <button *ngIf="selectedCarIndex > 0 && sumFuel / sumlength !== 100 && selectedCarsToRace[selectedCarIndex]?.selectedBets?.length < 3 && introModal === false" (click)="selectedCarIndex = selectedCarIndex - 1;calcSumFuel()" class="back-button">GO BACK</button>

    <button *ngIf="introModal === true && tutorialIndex === 3" (click)="skipModal()" class="close-tutorial"><span>3/6</span> Skip</button>
    <button *ngIf="introModal === true && tutorialIndex === 5" (click)="skipModal()" class="close-tutorial"><span>5/6</span> Skip</button> -->
  
  
  </div>


  
  <div class="step-cont visible  step5"  *ngIf="stepIndex === 5">
    
    
    <div class="content-holder">
      <div class="left-part">
        <div class="flex-item car">
          <p class="item-heading">{{'fuel_car.your_cars' | translate}}</p>
          <ng-container *ngFor="let kar of selectedCarsToRace; let i = index">
            <div class="car-item" *ngIf="i === summaryCarIndex">
              <div class="arrow-left" (click)="prevCar()" [hidden]="selectedCarsToRace?.length === 1"><img src="/assets/base/images/tankovanie/arrow-left.png" alt=""></div>
              <div class="arrow-right" (click)="nextCar()" [hidden]="selectedCarsToRace?.length === 1"><img src="/assets/base/images/tankovanie/arrow-right.png" alt=""></div>
              <img [src]="'/assets/base/images/cars/car' + kar.car_model + '.png'" alt="">
            </div>
          </ng-container>
          
        </div>
        <div class="flex-item summary">
          <p class="item-heading speci1">{{'fuel_car.your_bet' | translate}}</p>

          <div class="info-cont">

            <div class="info-item">
              <p class="desc">Prize pool</p>
              <p class="value">
                <img src="/assets/base/images/tankovanie/trx-token.png" alt="" *ngIf="currency === 'TRX'"> 
                <img src="/assets/base/images/tankovanie/ioi-token.png" alt="" *ngIf="currency === 'IOI'"> 
                {{pricePool + (selectedCarsToRace?.length * actualRaceAmount)}} {{currency}}</p>
            </div>
            <div class="info-item">
              <p class="desc">{{'fuel_car.your_bet' | translate}}</p>
              <div class="value" [ngClass]="{'small': summaryIoiAmount > 0 || summaryTrxAmount > 0}">
                <p *ngIf="currency === 'TRX'"><img src="/assets/base/images/tankovanie/trx-token.png" alt="">
                  <span>{{(actualRaceAmount  * selectedCarsToRace?.length ) + summaryTrxAmount }} </span> 
                </p> 
                <p *ngIf="currency === 'IOI'"><img src="/assets/base/images/tankovanie/ioi-token.png" alt=""> 
                  <span>{{(actualRaceAmount * selectedCarsToRace?.length) + summaryIoiAmount  }} </span>
                </p> 
  
                <p *ngIf="currency === 'IOI' && summaryTrxAmount > 0"><img src="/assets/base/images/tankovanie/trx-token.png" alt="">
                   <span>{{ summaryTrxAmount}} </span> 
                </p>              
                <p *ngIf="currency === 'TRX' && summaryIoiAmount > 0"><img src="/assets/base/images/tankovanie/ioi-token.png" alt="">
                   <span>{{ summaryIoiAmount }} </span>
                </p> 
              </div>
            </div>
            <div class="info-item">
              <p class="desc">{{'start-race.players' | translate}}</p>
              <p class="value chance">{{players}}</p>
              
            </div>

          </div>

         </div>
  
         <div class="flex-item multi-bet">
          <p class="item-heading speci2">{{'fuel_car.multibet' | translate}}</p>
          <div class="buttons-holder">
            <div class="bet-btn add-btn" (click)="stepIndex = 6">
              <p>+ {{'fuel_car.add_multibet' | translate}}</p>
            </div>
            <ng-container *ngFor="let item of multibetOptions">
              <div class="bet-btn" [ngClass]="'race' + item.val" *ngIf="item.enabled === false">
                <p class="bet-btn-text">{{item.val}} 
                  <span *ngIf="item.val !== 1 && item.val !== 3 && item.val !== 5">{{'shared.trx' | translate}}</span>
                  <span *ngIf="item.val === 1 || item.val === 3 || item.val === 5">{{'shared.ioi' | translate}}</span>
                </p>
              </div>
            </ng-container>
          </div>
        </div>
      </div>
    </div>

  </div>

  <div class="step-cont visible  step6"  *ngIf="stepIndex === 6">

    <div class="bets-holder" *ngIf="multibetOptions?.length > 0">
      <div *ngFor="let mb of multibetOptions; let i = index" class="inner-item-holder">
        <div class="item-race race10" *ngIf="mb.val === 10" [ngClass]="mb.enabled === true ? 'not-selected' : 'selected'">
          <p class="race-bet">{{mb.val}} {{'shared.trx' | translate}}</p>
          <button (click)="addToMultibet(mb, calc1, 10, i, 'trx')" *ngIf="mb.enabled === true">&nbsp;</button>
          <button (click)="removeFromMultibet(i, 10, 1, 'trx')" *ngIf="mb.enabled === false">&nbsp;</button>
        </div>
        <div class="item-race race50" *ngIf="mb.val === 50" [ngClass]="mb.enabled === true ? 'not-selected' : 'selected'">
          <p class="race-bet">{{mb.val}} {{'shared.trx' | translate}}</p>
          <button (click)="addToMultibet(mb, calc2, 50, i, 'trx')" *ngIf="mb.enabled === true">&nbsp;</button>
          <button (click)="removeFromMultibet(i, 50, 2, 'trx')" *ngIf="mb.enabled === false">&nbsp;</button>
        </div>
        <div class="item-race race100" *ngIf="mb.val === 100" [ngClass]="mb.enabled === true ? 'not-selected' : 'selected'">
          <p class="race-bet">{{mb.val}} {{'shared.trx' | translate}}</p>
          <button (click)="addToMultibet(mb, calc3, 100, i, 'trx')" *ngIf="mb.enabled === true">&nbsp;</button>
          <button (click)="removeFromMultibet(i, 100, 3, 'trx')" *ngIf="mb.enabled === false">&nbsp;</button>
        </div>
        <div class="item-race race500" *ngIf="mb.val === 500" [ngClass]="mb.enabled === true ? 'not-selected' : 'selected'">
          <p class="race-bet">{{mb.val}} {{'shared.trx' | translate}}</p>
          <button (click)="addToMultibet(mb, calc4, 500, i, 'trx')" *ngIf="mb.enabled === true">&nbsp;</button>
          <button (click)="removeFromMultibet(i, 500, 4, 'trx')" *ngIf="mb.enabled === false">&nbsp;</button>
        </div>
        <div class="item-race race1000" *ngIf="mb.val === 1000" [ngClass]="mb.enabled === true ? 'not-selected' : 'selected'">
          <p class="race-bet">{{mb.val}} {{'shared.trx' | translate}}</p>
          <button (click)="addToMultibet(mb, calc5, 1000, i, 'trx')" *ngIf="mb.enabled === true">&nbsp;</button>
          <button (click)="removeFromMultibet(i, 1000, 5, 'trx')" *ngIf="mb.enabled === false">&nbsp;</button>
        </div>
        <div class="item-race raceioi1" *ngIf="mb.val === 1" [ngClass]="mb.enabled === true ? 'not-selected' : 'selected'">
          <p class="race-bet">{{mb.val}} {{'shared.ioi' | translate}}</p>
          <button (click)="addToMultibet(mb, calc5, 1, i, 'ioi')" *ngIf="mb.enabled === true">&nbsp;</button>
          <button (click)="removeFromMultibet(i, 1, 6, 'ioi')" *ngIf="mb.enabled === false">&nbsp;</button>
        </div>
        <div class="item-race raceioi3" *ngIf="mb.val === 3" [ngClass]="mb.enabled === true ? 'not-selected' : 'selected'">
          <p class="race-bet">{{mb.val}} {{'shared.ioi' | translate}}</p>
          <button (click)="addToMultibet(mb, calc5, 3, i, 'ioi')" *ngIf="mb.enabled === true">&nbsp;</button>
          <button (click)="removeFromMultibet(i, 3, 7, 'ioi')" *ngIf="mb.enabled === false">&nbsp;</button>
        </div>
        <div class="item-race raceioi5" *ngIf="mb.val === 5" [ngClass]="mb.enabled === true ? 'not-selected' : 'selected'">
          <p class="race-bet">{{mb.val}} {{'shared.ioi' | translate}}</p>
          <button (click)="addToMultibet(mb, calc5, 5, i, 'ioi')" *ngIf="mb.enabled === true">&nbsp;</button>
          <button (click)="removeFromMultibet(i, 5, 8, 'ioi')" *ngIf="mb.enabled === false">&nbsp;</button>
        </div>
          </div>
    </div>

  </div>

  <div class="bottom-panels">
    <div class="hint-panel fast-fuel" *ngIf="stepIndex === 0">
      <div class="icon-holder">
        <img src="/assets/base/images/tankovanie/fast-fuel-red.png" alt="">
      </div>
      <div class="text-holder">
        <p class="heading">{{'fuel_car.play_faster' | translate}}</p>
        <p>{{'fuel_car.pick_fast_combo' | translate}}</p>
      </div>
      <div class="fast-fuel-btn" style="display:none">
        <p>{{'fuel_car.pick_fast_fuel' | translate}} <span>></span></p>
      </div>
    </div>

    <div class="hint-panel" *ngIf="stepIndex !== 0">
      <div class="icon-holder">
        <img src="/assets/base/images/tankovanie/bulb-icon.png" alt="">
      </div>
      <div class="text-holder">
        <p class="heading">{{'fuel_car.get_premium' | translate}}</p>
        <p>{{'fuel_car.get_premium_text' | translate}}</p>
      </div>
      <div class="fast-fuel-btn" style="display:none" [routerLink]="['/teams/join-teams']">
        <p>{{'teams.shared.join' | translate}} <span>></span></p>
      </div>
    </div>

    <ng-container *ngIf="stepIndex === 2">
      <button class="back-button" (click)="stepIndex = 1" *ngIf="firstLogin === false && (selectedCarIndex < 1 ||  sumFuel / sumlength === 100) && selectedCarsToRace[selectedCarIndex]?.selectedBets?.length < 3">&lt; {{'shared.back' | translate}}</button>
      <button class="back-button" (click)="resetSelected();calcSumFuel()" *ngIf="selectedCarsToRace[selectedCarIndex]?.selectedBets?.length === 3 && introModal === false">&lt; {{'shared.back' | translate}}</button>
      <button class="back-button" *ngIf="selectedCarIndex > 0 && sumFuel / sumlength !== 100 && selectedCarsToRace[selectedCarIndex]?.selectedBets?.length < 3 && introModal === false" (click)="selectedCarIndex = selectedCarIndex - 1;calcSumFuel()">&lt; {{'shared.back' | translate}}</button>
    </ng-container>

    <ng-container *ngIf="stepIndex === 1">
      <button class="back-button" (click)="stepIndex = 0">&lt; {{'shared.back' | translate}}</button>
    </ng-container>

    <ng-container *ngIf="stepIndex === 5">
      <button class="back-button" (click)="stepIndex = 2">&lt; {{'shared.back' | translate}}</button>
    </ng-container>

    <ng-container *ngIf="stepIndex === 6">
      <button class="back-button" (click)="stepIndex = 5">&lt; {{'shared.back' | translate}}</button>
    </ng-container>
    
    <div class="timer-holder">
      <div class="border-maker"></div>
      <div class="timer-cont">
        <p class="desc">{{'fuel_car.race_starts' | translate}}</p>
        <h2 *ngIf="timerReady === true"><app-timer [value]="raceStarts" (onComplete)="timerCompleted()"></app-timer></h2>
      </div>
    </div>
  </div>

  <div class="profile-top-panel">
    <div class="profile-info">
      <div class="profile-stats">
        <p class="name">{{myDriverStats?.nickname}}</p>
        <p class="level" [ngClass]="'level' + myAffilate?.affiliate_level">{{'shared.level' | translate}} {{myAffilate?.affiliate_level}}</p>
      </div>
      <div class="profile-img">
        <img src="assets/base/images/avatars/level1-1big.png" alt="" *ngIf="myAffilate?.affiliate_level === 1">
        <img src="assets/base/images/avatars/level2-1big.png" alt="" *ngIf="myAffilate?.affiliate_level === 2">
        <img src="assets/base/images/avatars/level3-1big.png" alt="" *ngIf="myAffilate?.affiliate_level === 3">
        <img src="assets/base/images/avatars/level4-1big.png" alt="" *ngIf="myAffilate?.affiliate_level === 4">
      </div>
    </div>
  </div>

</div>


<div class="modal fade" id="indicate" tabindex="-1" role="dialog" aria-labelledby="indicator" aria-hidden="true">
  <div class="modal-dialog my-modal-dialog indicator-modal" role="document">
    <div class="modal-content my-modal-content">
      <button type="button" class="close my-modal-close" data-dismiss="modal" aria-label="Close" (click)="selectedSymbol = null">
        <span aria-hidden="true"><img src="assets/rewards/X-modal.png" alt=""></span>
      </button>
      <div class="modal-body" *ngIf="selectedSymbol" style="height:500px;">
        <app-indicator [type]="selectedSymbol"></app-indicator>
      </div>
    </div>
  </div>
</div>


<h2 class="loading" *ngIf="!myCars">{{'fuel_car.loading' | translate}}</h2>

<div class="main-holder">


  <div class="main-top-panel">

    <img src="/assets/base/images/logo.png" alt="ioi logo" class="ioi-logo" [routerLink]="['/race/start-race']">

    <ng-container *ngIf="stepIndex === 1">
      <div class="mid-text mb110">
        <p class="heading">Pick a car</p>
        <p class="text">Choose a car for the race or multiple cars for higher winning rates</p>
      </div>
    </ng-container>
    

    <ng-container *ngIf="stepIndex === 2">
      <div class="mid-text mb50">
        <p class="heading">Set up fuel</p>
        <p class="text">Pick your favourite crypto combination as a fuel, try your luck or use Premium fuel to increase your chances to win!</p>
      </div>
    </ng-container>

    <ng-container *ngIf="stepIndex === 5">
      <div class="mid-text mb110 summary">
        <p class="heading">Summary</p>
        <p class="text">Check up your car and fuel combination, add a multibet to win more money!</p>
      </div>
    </ng-container>

    <ng-container *ngIf="stepIndex === 6">
      <div class="mid-text mb50">
        <p class="heading">Multibet</p>
        <p class="text">Pick multiple races to place your bets on!</p>
      </div>
    </ng-container>

    <div class="boxes-holder">
      <div class="timer-box my-border-grad">
        <div class="inner">
          <p class="desc">Race starts in</p>
          <p class="time" *ngIf="raceStartsIn"><app-timer [value]="raceStartsIn" (onComplete)="timerCompleted()"></app-timer></p>
        </div>
      </div>
    </div>
  </div>
    
  <!-- <div class="top-banner-holder" *ngIf=" stepIndex === 1">
    <app-main-top-banner [page]="'fuel-car1'"></app-main-top-banner>
  </div>

  <div class="top-banner-holder" *ngIf="stepIndex === 2">
    <app-main-top-banner [page]="'fuel-car2'"></app-main-top-banner>
  </div>

  
  <div class="menu-holder">
    <div class="fuel-menu" [ngClass]="'state' + stepIndex">
      <div class="menu-desc">
          <p class="pick-car">1. {{'fuel_car.pick_car' | translate}}</p>
          <p class="pick-fuel">2. {{'fuel_car.pick_fuel' | translate}}</p>
          <p class="summary">3. {{'fuel_car.summary' | translate}}</p>
      </div>
      <div class="menu-line">
          <div class="inner-line">&nbsp;</div>
      </div>
    </div>

    <ng-container *ngIf=" stepIndex === 1">
      <button [disabled]="!selectedCarIndex && selectedCarIndex !== 0" class="next-button" 
        [ngClass]="{'active': selectedCarIndex || selectedCarIndex === 0}" (click)="stepIndex = 2;resetSelected();calcSumFuel()">
          <div class="border-maker"></div>
          <p>Continue <img src="/assets/base/images/tankovanie/next-icon.png" alt=""></p>
        </button>
    </ng-container>
    

    <ng-container *ngIf="stepIndex === 2">
      <button [disabled]="selectedCarsToRace[selectedCarIndex]?.fuel !== 100" class="next-button" *ngIf="sumFuel / sumlength !== 100"
        [ngClass]="{'active': selectedCarsToRace[selectedCarIndex]?.fuel === 100}" (click)="selectedCarIndex = selectedCarIndex + 1;calcSumFuel()">
          <div class="border-maker"></div>
          <p>{{'race.continue' | translate}} <img src="/assets/base/images/tankovanie/next-icon.png" alt=""></p>
      </button>

      <button [disabled]="sumFuel / sumlength !== 100" class="next-button" *ngIf="sumFuel / sumlength === 100"
        [ngClass]="{'active': sumFuel / sumlength === 100}" (click)="signupToRace()">
          <div class="border-maker"></div>
          <p>{{'race.continue' | translate}} <img src="/assets/base/images/tankovanie/next-icon.png" alt=""></p>
      </button>
    </ng-container>

    <ng-container *ngIf="stepIndex === 3">
      <button class="next-button" (click)="stepIndex = 2;"
      [disabled]="selectedCarsToRace[selectedCarIndex]?.selectedBets?.length < 3"
      [ngClass]="{'active': selectedCarsToRace[selectedCarIndex]?.selectedBets?.length === 3}">
        <div class="border-maker"></div>
        <p>{{'race.continue' | translate}} <img src="/assets/base/images/tankovanie/next-icon.png" alt=""></p>
      </button>
    </ng-container>

    <ng-container *ngIf="stepIndex === 5">
      <button class="next-button active" *ngIf="isLoading === true">
        <div class="border-maker"></div>
        <p>{{'fuel_car.loading' | translate}}</p>
      </button>

      <button *ngIf="isLoading === false" class="next-button active" (click)="signupToRace()">
        <div class="border-maker"></div>
        <p>{{'main_top_banner.heading5' | translate}} <img src="/assets/base/images/tankovanie/next-icon.png" alt=""></p>
      </button>

    </ng-container>


  </div> -->

  <div class="step-cont visible  step1" *ngIf="stepIndex === 1">


    <div class="content-holder">

      <div class="cars-list">
        <div class="my-grad left" (click)="prevSlideCar()"></div>
        <div class="slider-holder" (swipeleft)="nextSlideCar()" (swiperight)="prevSlideCar()">
          <div class="inner-slider" [ngStyle]="{'left.%': 0 - (slidePercent * carSlideIndex)}">
            <ng-container *ngFor="let car of myCars;let i = index">
              <div class="car-item" (click)="selectCarToRace(i)"
              [ngClass]="{'big-center': i === selectedSlideIndex, 
              'mid-sides': i === selectedSlideIndex - 1 || i === selectedSlideIndex + 1,
              'small-sides': i === selectedSlideIndex - 2 || i === selectedSlideIndex + 2}">
  
                <div class="car-check" *ngIf="selectedCarIndex === i">
                  <div class="inner">
                    <p><img src="/assets/base/images/tankovanie/fueled-check.svg" alt="" class="check"> Picked</p>
                  </div>
                </div>
    
                <img [src]="'/assets/base/images/nft-cars/car' + car.c + '.png'" alt="">
    
              </div>
            </ng-container>
          </div>
        </div>
        <div class="my-grad right" (click)="nextSlideCar()"></div>
      </div>

    </div>

  </div>

  <!-- <div class="step-cont visible  step1" *ngIf="stepIndex === 1">


    <div class="content-holder">

      <div class="cars-list">
        <p class="segment-heading">Pick a car</p>
        <div class="cars-holder">
          <ng-container *ngFor="let car of myCars;let i = index">
            <div class="car-item" (click)="selectCarToRace(i)">

              <div class="select-indicator" [ngClass]="{'active': i === selectedCarIndex}"></div>
              <img [src]="'/assets/base/images/cars/car' + car.c + '.png'" alt="">

            </div>
          </ng-container>
        </div>
      </div>

      <div class="overview-holder">
        <div class="left-part">

          <div class="box-item">
            <p class="desc">{{'fuel_car.cars' | translate}}</p>
            <div class="box">
              <p>{{selectedCarsToRace?.length}}</p>
            </div>
          </div>


          <div class="box-item">
            <p class="desc">{{'fuel_car.your_bet' | translate}}</p>
            <div class="box">
              <p><img src="/assets/base/images/tankovanie/trx-token.png" alt="">{{10 * selectedCarsToRace?.length}} {{'shared.trx' | translate}}</p>
            </div>
          </div>

        </div>
        <div class="right-part">
          <div class="chances-box">
            <div class="icon-holder">
              <img src="/assets/base/images/tankovanie/bulb-icon.png" alt="">
            </div>
            <div class="text-holder">
              <p class="heading">{{'fuel_car.multiply_chances' | translate}}</p>
              <p>{{'fuel_car.increase_chance' | translate}}</p>
            </div>
          </div>
        </div>
      </div>

    </div>

  </div> -->

  <div class="step-cont visible  step2"  *ngIf=" stepIndex === 2">

    <div class="content-holder">
      
      <div class="content-box box1">
        <div class="box-heading">
          <p class="heading">Pick 3 different fuels</p>
        </div>

        <div class="carousel-holder">
          <div class="inner-item-holder" [ngClass]="{'only-favs': favFilter === true}">
    
            <ng-container *ngFor="let majbet of selectedCarsToRace[selectedCarIndex]?.bet | orderBy: order:reverse">
              <div class="item-holder" [ngClass]="{'fav': majbet.favourite === true}">
                <div class="item-curr my-low-gradient" (click)="toggleCoin(majbet.customIndex)" [ngClass]="{'not-selected': majbet.selected !== true}">
                  <div class="marks-holder">
                    <img src="/assets/base/images/tankovanie/premium-icon.svg" alt="" class="premium-mark" *ngIf="majbet?.symbol === myBetInput[0]?.symbol || majbet?.symbol === myBetInput[1]?.symbol || majbet?.symbol === myBetInput[2]?.symbol">
                  </div>
                  <img [src]="'/assets/base/images/curr-logos/'+ majbet.symbol +'-logo.png'" alt="">
                  <p class="item-symbol">{{majbet.symbol}}</p>
                </div>
              </div>
            </ng-container>
            
          </div>
        </div>

        <div class="legend">
          <p><img src="/assets/base/images/tankovanie/premium-icon.svg" alt=""> Premium fuel</p>
          <p class="racer-tip"><img src="/assets/base/images/tankovanie/racer-tip-icon.svg" alt=""> Racer Tip of the day</p>
        </div>
        <!-- <p class="choose-text">or choose</p>

        <div class="top-btns">
          <div class="btn-item premium inactive" *ngIf="myTeam === undefined || myTeam === ''">
            <p><img src="/assets/base/images/tankovanie/premium-icon.png" alt=""> {{'fuel_car.premium_fuel' | translate}}</p>
          </div>
          <div class="btn-item premium" *ngIf="myTeam !== undefined && myTeam !== ''" (click)="fuelBest()">
            <p><img src="/assets/base/images/tankovanie/premium-icon.png" alt=""> {{'fuel_car.premium_fuel' | translate}}</p>
          </div>

          <div class="btn-item" (click)="generateAutomaticBetsOnce()">
            <p><img src="/assets/base/images/tankovanie/lucky-icon.png" alt=""> {{'fuel_car.lucky_fuel' | translate}}</p>
          </div>
        </div> -->
      </div>

      <div class="content-box box2" id="analysisBox">

        <div class="box-heading">
          <p class="heading">Technical analysis</p>
        </div>

        <div class="graphs-holder">
          <app-indicator [type]="selectedSymbol" *ngIf="selectedSymbol"></app-indicator>
        </div>
        
        <div class="bottom-part">
          <div class="sliders" *ngIf="selectedCarsToRace[selectedCarIndex]?.selectedBets?.length === 0">
            
    
            <div class="items-holder">
              <div class="curr-item">
                <div class="curr-img empty"></div>
                <div class="input-holder">
                  <p class="percent-info">0%</p>
                  <input type="range" min="0"  step="1"  max="90" disabled value="0">
                </div>
                <div class="top-btns">
                  <div class="btn-item long">
                    <div class="inner">
                      <img src="/assets/base/images/icons/long-icon.svg" alt="">
                      <p>Long</p>
                    </div>
                  </div>
                  <div class="btn-item short">
                    <div class="inner">
                      <img src="/assets/base/images/icons/short-icon.svg" alt="">
                      <p>Short</p>
                    </div>
                  </div>
                </div>
              </div>
      
              <div class="curr-item">
                <div class="curr-img empty"></div>
                <div class="input-holder">
                  <p class="percent-info">0%</p>
                  <input type="range" min="0"  step="1"  max="90" disabled value="0">
                </div>
                <div class="top-btns">
                  <div class="btn-item long">
                    <div class="inner">
                      <img src="/assets/base/images/icons/long-icon.svg" alt="">
                      <p>Long</p>
                    </div>
                  </div>
                  <div class="btn-item short">
                    <div class="inner">
                      <img src="/assets/base/images/icons/short-icon.svg" alt="">
                      <p>Short</p>
                    </div>
                  </div>
                </div>
              </div>
      
              <div class="curr-item">
                <div class="curr-img empty"></div>
                <div class="input-holder">
                  <p class="percent-info">0%</p>
                  <input type="range" min="0"  step="1"  max="90" disabled value="0">
                </div>
                <div class="top-btns">
                  <div class="btn-item long">
                    <div class="inner">
                      <img src="/assets/base/images/icons/long-icon.svg" alt="">
                      <p>Long</p>
                    </div>
                  </div>
                  <div class="btn-item short">
                    <div class="inner">
                      <img src="/assets/base/images/icons/short-icon.svg" alt="">
                      <p>Short</p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
    
          <div class="sliders" *ngIf="selectedCarsToRace[selectedCarIndex]?.selectedBets?.length > 0">
            
    
            <div class="items-holder">
              
              <div class="curr-item">
                <div class="curr-img selected my-border-grad">
                  <div class="inner">
                    <img [src]="'/assets/base/images/curr-logos/'+ selectedCarsToRace[selectedCarIndex]?.bet[selectedCarsToRace[selectedCarIndex]?.selectedBets[0]].symbol +'-logo.png'" alt="">
                  </div>
                </div>
                <div class="input-holder">
                  <p class="percent-info" [ngStyle]="{'left': 'calc(' + ((selectedCarsToRace[selectedCarIndex]?.bet[selectedCarsToRace[selectedCarIndex]?.selectedBets[0]].bet * 100) / 90) + '% + ' + (8 - ((selectedCarsToRace[selectedCarIndex]?.bet[selectedCarsToRace[selectedCarIndex]?.selectedBets[0]].bet * 100) / 90 * 0.3)) + 'px)', 'transform': 'translateX(-4px)'}">{{selectedCarsToRace[selectedCarIndex]?.bet[selectedCarsToRace[selectedCarIndex]?.selectedBets[0]].bet}}%</p>
                  <input type="range" min="0"  step="1"  max="90" value="0" [(ngModel)]="selectedCarsToRace[selectedCarIndex]?.bet[selectedCarsToRace[selectedCarIndex]?.selectedBets[0]].bet" 
                  [ngModelOptions]="{standalone: true}" (change)="changeFuel($event, selectedCarsToRace[selectedCarIndex]?.bet[selectedCarsToRace[selectedCarIndex]?.selectedBets[0]]?.customIndex)">
                </div>
                <div class="top-btns active">
                  
                  <div class="btn-item long" (click)="selectedCarsToRace[selectedCarIndex]?.bet[selectedCarsToRace[selectedCarIndex]?.selectedBets[0]].short = false"
                  [ngClass]="selectedCarsToRace[selectedCarIndex]?.bet[selectedCarsToRace[selectedCarIndex]?.selectedBets[0]].short === false ? 'active' : 'passive'">
                  <div class="inner">
                    <img class="active-img" src="/assets/base/images/icons/long-icon-active.svg" alt="">
                    <img class="passive-img" src="/assets/base/images/icons/long-icon.svg" alt="">
                    <p>Long</p>
                  </div>
                </div>
                <div class="btn-item short" (click)="selectedCarsToRace[selectedCarIndex]?.bet[selectedCarsToRace[selectedCarIndex]?.selectedBets[0]].short = true"
                [ngClass]="selectedCarsToRace[selectedCarIndex]?.bet[selectedCarsToRace[selectedCarIndex]?.selectedBets[0]].short === true ? 'active' : 'passive'">
                  <div class="inner">
                    <img class="active-img" src="/assets/base/images/icons/short-icon-active.svg" alt="">
                    <img class="passive-img" src="/assets/base/images/icons/short-icon.svg" alt="">
                    <p>Short</p>
                  </div>
                </div>
                </div>
              </div>
      
              <div class="curr-item" *ngIf="selectedCarsToRace[selectedCarIndex]?.selectedBets?.length > 1">
                <div class="curr-img selected my-border-grad">
                  <div class="inner">
                    <img [src]="'/assets/base/images/curr-logos/'+ selectedCarsToRace[selectedCarIndex]?.bet[selectedCarsToRace[selectedCarIndex]?.selectedBets[1]].symbol +'-logo.png'" alt="">
                  </div>
                </div>
                <div class="input-holder">
                    <p class="percent-info" [ngStyle]="{'left': 'calc(' + ((selectedCarsToRace[selectedCarIndex]?.bet[selectedCarsToRace[selectedCarIndex]?.selectedBets[1]].bet * 100) / 90) + '% + ' + (8 - ((selectedCarsToRace[selectedCarIndex]?.bet[selectedCarsToRace[selectedCarIndex]?.selectedBets[1]].bet * 100) / 90 * 0.3)) + 'px)', 'transform': 'translateX(-4px)'}">{{selectedCarsToRace[selectedCarIndex]?.bet[selectedCarsToRace[selectedCarIndex]?.selectedBets[1]].bet}}%</p>
                  <input type="range" min="0"  step="1"  max="90" value="0" [(ngModel)]="selectedCarsToRace[selectedCarIndex]?.bet[selectedCarsToRace[selectedCarIndex]?.selectedBets[1]].bet" 
                  [ngModelOptions]="{standalone: true}" (change)="changeFuel($event, selectedCarsToRace[selectedCarIndex]?.bet[selectedCarsToRace[selectedCarIndex]?.selectedBets[1]]?.customIndex)">
                </div>
                <div class="top-btns active">
                  
                  <div class="btn-item long" (click)="selectedCarsToRace[selectedCarIndex]?.bet[selectedCarsToRace[selectedCarIndex]?.selectedBets[1]].short = false"
                  [ngClass]="selectedCarsToRace[selectedCarIndex]?.bet[selectedCarsToRace[selectedCarIndex]?.selectedBets[1]].short === false ? 'active' : 'passive'">
                    <div class="inner">
                      <img class="active-img" src="/assets/base/images/icons/long-icon-active.svg" alt="">
                      <img class="passive-img" src="/assets/base/images/icons/long-icon.svg" alt="">
                      <p>Long</p>
                    </div>
                  </div>
                  <div class="btn-item short" (click)="selectedCarsToRace[selectedCarIndex]?.bet[selectedCarsToRace[selectedCarIndex]?.selectedBets[1]].short = true"
                  [ngClass]="selectedCarsToRace[selectedCarIndex]?.bet[selectedCarsToRace[selectedCarIndex]?.selectedBets[1]].short === true ? 'active' : 'passive'">
                    <div class="inner">
                      <img class="active-img" src="/assets/base/images/icons/short-icon-active.svg" alt="">
                      <img class="passive-img" src="/assets/base/images/icons/short-icon.svg" alt="">
                      <p>Short</p>
                    </div>
                  </div>
                </div>
              </div>
      
              <div class="curr-item" *ngIf="selectedCarsToRace[selectedCarIndex]?.selectedBets?.length > 2">
                <div class="curr-img selected my-border-grad">
                  <div class="inner">
                    <img [src]="'/assets/base/images/curr-logos/'+ selectedCarsToRace[selectedCarIndex]?.bet[selectedCarsToRace[selectedCarIndex]?.selectedBets[2]].symbol +'-logo.png'" alt="">
                  </div>
                </div>
                <div class="input-holder">
                  <p class="percent-info" [ngStyle]="{'left': 'calc(' + ((selectedCarsToRace[selectedCarIndex]?.bet[selectedCarsToRace[selectedCarIndex]?.selectedBets[2]].bet * 100) / 90) + '% + ' + (8 - ((selectedCarsToRace[selectedCarIndex]?.bet[selectedCarsToRace[selectedCarIndex]?.selectedBets[2]].bet * 100) / 90 * 0.3)) + 'px)', 'transform': 'translateX(-4px)'}">{{selectedCarsToRace[selectedCarIndex]?.bet[selectedCarsToRace[selectedCarIndex]?.selectedBets[2]].bet}}%</p>
                  <input type="range" min="0"  step="1"  max="90" value="0" [(ngModel)]="selectedCarsToRace[selectedCarIndex]?.bet[selectedCarsToRace[selectedCarIndex]?.selectedBets[2]].bet"
                   [ngModelOptions]="{standalone: true}" (change)="changeFuel($event, selectedCarsToRace[selectedCarIndex]?.bet[selectedCarsToRace[selectedCarIndex]?.selectedBets[2]]?.customIndex)">
      
                </div>
                <div class="top-btns active">
                  
                  <div class="btn-item long" (click)="selectedCarsToRace[selectedCarIndex]?.bet[selectedCarsToRace[selectedCarIndex]?.selectedBets[2]].short = false"
                  [ngClass]="selectedCarsToRace[selectedCarIndex]?.bet[selectedCarsToRace[selectedCarIndex]?.selectedBets[2]].short === false ? 'active' : 'passive'">
                    <div class="inner">
                      <img class="active-img" src="/assets/base/images/icons/long-icon-active.svg" alt="">
                      <img class="passive-img" src="/assets/base/images/icons/long-icon.svg" alt="">
                      <p>Long</p>
                    </div>
                  </div>
                  <div class="btn-item short" (click)="selectedCarsToRace[selectedCarIndex]?.bet[selectedCarsToRace[selectedCarIndex]?.selectedBets[2]].short = true"
                  [ngClass]="selectedCarsToRace[selectedCarIndex]?.bet[selectedCarsToRace[selectedCarIndex]?.selectedBets[2]].short === true ? 'active' : 'passive'">
                    <div class="inner">
                      <img class="active-img" src="/assets/base/images/icons/short-icon-active.svg" alt="">
                      <img class="passive-img" src="/assets/base/images/icons/short-icon.svg" alt="">
                      <p>Short</p>
                    </div>
                  </div>
                </div>
              </div>

              <div class="curr-item"  *ngIf="selectedCarsToRace[selectedCarIndex]?.selectedBets?.length  < 2">
                <div class="curr-img empty"></div>
                <div class="input-holder">
                  <p class="percent-info">0%</p>
                  <input type="range" min="0"  step="1"  max="90" disabled value="0">
                </div>
                <div class="top-btns">
                  <div class="btn-item long">
                    <div class="inner">
                      <img src="/assets/base/images/icons/long-icon.svg" alt="">
                      <p>Long</p>
                    </div>
                  </div>
                  <div class="btn-item short">
                    <div class="inner">
                      <img src="/assets/base/images/icons/short-icon.svg" alt="">
                      <p>Short</p>
                    </div>
                  </div>
                </div>
              </div>
              <div class="curr-item"  *ngIf="selectedCarsToRace[selectedCarIndex]?.selectedBets?.length < 3">
                <div class="curr-img empty"></div>
                <div class="input-holder">
                  <p class="percent-info">0%</p>
                  <input type="range" min="0"  step="1"  max="90" disabled value="0">
                </div>
                <div class="top-btns">
                  <div class="btn-item long">
                    <div class="inner">
                      <img src="/assets/base/images/icons/long-icon.svg" alt="">
                      <p>Long</p>
                    </div>
                  </div>
                  <div class="btn-item short">
                    <div class="inner">
                      <img src="/assets/base/images/icons/short-icon.svg" alt="">
                      <p>Short</p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="svg-holder">
            <p class="top-heading">Fuel up to 100%</p>
            <div class="svg-item">
              <svg width="100%" height="100%" viewBox="0 0 40 40" class="donut donut-red">
                <defs>
                  <filter id="f2" x="-30%" y="-30%" width="160%" height="160%">
                    <feOffset result="offOut" in="SourceGraphic" dx="0" dy="0" />
                    <feGaussianBlur result="blurOut" in="offOut" stdDeviation="1.3" />
                    <feBlend in="SourceGraphic" in2="blurOut" mode="normal" />
                  </filter>
                  <linearGradient id="linear" x1="50%" y1="50%" x2="190%" y2="200%" spreadMethod="pad">
                    <stop offset="0%"   stop-color="#FE173F"/>
                    <stop offset="100%" stop-color="#240B36"/>
                  </linearGradient>
                </defs>
                <circle class="donut-hole" cx="20" cy="20" r="15.91549430918954" fill="black"></circle>
                <circle class="donut-ring" cx="20" cy="20" r="15.91549430918954" fill="transparent" stroke-width="2.5"></circle>
      
                <circle *ngIf="selectedCarsToRace[selectedCarIndex]?.fuel > 0" filter="url(#f2)" stroke="url(#linear)" class="donut-segment" cx="20" cy="20" r="15.91549430918954" fill="transparent" 
                stroke-width="2" stroke-dashoffset="25" [ngStyle]="{'stroke-dasharray': selectedCarsToRace[selectedCarIndex]?.fuel + ' ' + (100 - selectedCarsToRace[selectedCarIndex]?.fuel)}"></circle>
      
              </svg>
              <svg width="100%" height="100%" viewBox="0 0 40 40" class="donut donut-blue">
                <defs>
                  <filter id="f1" x="-30%" y="-30%" width="160%" height="160%">
                    <feOffset result="offOut" in="SourceGraphic" dx="0" dy="0" />
                    <feGaussianBlur result="blurOut" in="offOut" stdDeviation="1.3" />
                    <feBlend in="SourceGraphic" in2="blurOut" mode="normal" />
                  </filter>
                  <linearGradient id="linear2" x1="5%" y1="0%" x2="190%" y2="-100%" spreadMethod="pad">
                    <stop offset="0%" stop-color="#23FFFF"/>
                    <stop offset="100%" stop-color="#2B16F7"/>
                  </linearGradient>
                </defs>
                <circle class="donut-hole" cx="20" cy="20" r="15.91549430918954" fill="black"></circle>
                <circle class="donut-ring" cx="20" cy="20" r="15.91549430918954" fill="transparent" stroke-width="2.5"></circle>
      
                <circle *ngIf="selectedCarsToRace[selectedCarIndex]?.fuel > 0" filter="url(#f1)" stroke="url(#linear2)" class="donut-segment" cx="20" cy="20" r="15.91549430918954" fill="transparent" 
                stroke-width="2" stroke-dashoffset="25" [ngStyle]="{'stroke-dasharray': selectedCarsToRace[selectedCarIndex]?.fuel + ' ' + (100 - selectedCarsToRace[selectedCarIndex]?.fuel)}"></circle>
      
              </svg>
              <p class="donut-percent">{{selectedCarsToRace[selectedCarIndex]?.fuel | number:'1.0-0':'fr'}}%</p>
            </div>
            <div class="lucky-holder">
              <div class="lucky-btn my-cta-btn-back" (click)="generateAutomaticBetsOnce()">
                <div class="inner">
                  <img src="/assets/base/images/tankovanie/lucky-icon.svg" alt="">
                  <p>Lucky fuel</p>
                </div>
              </div>
            </div>
          </div>
        </div>

      </div>

    </div>

    <!-- <button class="back-button" (click)="stepIndex = 1" *ngIf="firstLogin === false && (selectedCarIndex < 1 ||  sumFuel / sumlength === 100) && selectedCarsToRace[selectedCarIndex]?.selectedBets?.length < 3">GO BACK</button>
    <button class="back-button" (click)="resetSelected();calcSumFuel()" *ngIf="selectedCarsToRace[selectedCarIndex]?.selectedBets?.length === 3 && introModal === false">GO BACK</button>
    <button *ngIf="selectedCarIndex > 0 && sumFuel / sumlength !== 100 && selectedCarsToRace[selectedCarIndex]?.selectedBets?.length < 3 && introModal === false" (click)="selectedCarIndex = selectedCarIndex - 1;calcSumFuel()" class="back-button">GO BACK</button>

    <button *ngIf="introModal === true && tutorialIndex === 3" (click)="skipModal()" class="close-tutorial"><span>3/6</span> Skip</button>
    <button *ngIf="introModal === true && tutorialIndex === 5" (click)="skipModal()" class="close-tutorial"><span>5/6</span> Skip</button> -->
  
  
  </div>


  <div class="bottom-panels">

    <ng-container *ngIf="stepIndex === 1">
      <button class="back-button" [routerLink]="['/race/start-race']"><span class="my-gt">&lt;</span> <br> {{'shared.back' | translate}}</button>
    </ng-container>

    <ng-container *ngIf="stepIndex === 2">
      <button class="back-button" (click)="stepIndex = 1" *ngIf="firstLogin === false && (selectedCarIndex < 1 ||  sumFuel / sumlength === 100) && selectedCarsToRace[selectedCarIndex]?.selectedBets?.length < 3"><span class="my-gt">&lt;</span> <br> {{'shared.back' | translate}}</button>
      <button class="back-button" (click)="resetSelected();calcSumFuel()" *ngIf="selectedCarsToRace[selectedCarIndex]?.selectedBets?.length === 3 && introModal === false"><span class="my-gt">&lt;</span> <br> {{'shared.back' | translate}}</button>
      <button class="back-button" *ngIf="selectedCarIndex > 0 && sumFuel / sumlength !== 100 && selectedCarsToRace[selectedCarIndex]?.selectedBets?.length < 3 && introModal === false" (click)="selectedCarIndex = selectedCarIndex - 1;calcSumFuel()"><span class="my-gt">&lt;</span> <br> {{'shared.back' | translate}}</button>
    </ng-container>

    <ng-container *ngIf="stepIndex === 5">
      <button class="back-button" (click)="stepIndex = 2"><span class="my-gt">&lt;</span> <br> {{'shared.back' | translate}}</button>
    </ng-container>

    <ng-container *ngIf="stepIndex === 6">
      <button class="back-button" (click)="stepIndex = 5"><span class="my-gt">&lt;</span> <br> {{'shared.back' | translate}}</button>
    </ng-container>

    <div class="selected-cars" *ngIf="stepIndex === 1">
      <div class="inner">
        <p class="top-desc">Currently picked</p>
        <div class="cars-holder first-step">
          <div class="car-item">
            <img [src]="'/assets/base/images/nft-cars/car' + myCars[selectedCarIndex].c + '.png'" alt="">
          </div>
        </div>
      </div>
      <div class="next-btn my-fuel-btn-back" *ngIf="selectedCarsToRace.length > 0" (click)="stepIndex = 2;resetSelected();selectDefaultCoin(0)">
        <p>Continue &gt;</p>
      </div>
      <div class="next-btn inactive my-fuel-btn-back" *ngIf="selectedCarsToRace.length === 0">
        <p>Continue &gt;</p>
      </div>
    </div>

    <div class="selected-cars" *ngIf="stepIndex === 2">
      <div class="inner">
        <p class="top-desc">Fuel up every car</p>
        <div class="cars-holder">
          <div class="car-item" *ngFor="let car of selectedCarsToRace;let i = index" [ngClass]="{'fueled': selectedCarsToRace[i]?.fuel === 100}" (click)="selectedCarIndex = i">
            <img [src]="'/assets/base/images/nft-cars/car' + car.c + '.png'" alt="">
            <img src="/assets/base/images/tankovanie/fueled-check.svg" alt="" class="check">
            <div class="dot-ind" *ngIf="selectedCarIndex === i"><div class="dot"></div></div>
          </div>
        </div>
      </div>
      <div class="next-btn my-fuel-btn-back" *ngIf="selectedCarsToRace[selectedCarIndex]?.fuel === 100 && sumFuel / sumlength !== 100 && selectedCarIndex < selectedCarsToRace.length - 1" (click)="selectedCarIndex = selectedCarIndex + 1;calcSumFuel()">
        <p>Next car &gt;</p>
      </div>

      <div class="next-btn my-fuel-btn-back" *ngIf="selectedCarsToRace[selectedCarIndex]?.fuel === 100 && sumFuel / sumlength === 100" (click)="signupToRace()">
        <p>Start game &gt;</p>
      </div>

      <div class="next-btn inactive my-fuel-btn-back" (click)="scrollToView('analysisBox')" *ngIf="selectedCarsToRace[selectedCarIndex]?.fuel !== 100 && sumFuel / sumlength !== 100">
        <p>Next car &gt;</p>
      </div>
    </div>

    <div class="hint-holder" *ngIf="stepIndex === 5">
      <div class="img-holder">
        <img src="/assets/base/images/tankovanie/hint-icon.svg" alt="">
      </div>
      <div class="text-holder">
        <p class="heading">Buy more, win more</p>
        <p class="text">Buy more cars in your Garage, unlock a Rare car and increase your winning chances by playing with more cars in one race!</p>
      </div>
      <div class="garage-btn my-cta-btn-back" [routerLink]="['/car/garage']">
        <div class="inner">
          <p>Go to garage</p>
        </div>
      </div>
    </div>

    <div class="start-race-btn with-btns" *ngIf="stepIndex === 5">
      <div class="inner-btn my-fuel-btn-back" (click)="signupToRace()">
        <p *ngIf="isLoading === false">Start race &gt;</p>
        <p *ngIf="isLoading === true">Loading.. </p>
      </div>
    </div>


    <div class="start-race-btn" *ngIf="stepIndex === 6" (click)="stepIndex = 5">
      <div class="inner-btn my-fuel-btn-back">
        <p>Continue &gt;</p>
      </div>
    </div>
    
  </div>

</div>